# Makefile.in for REMIND
# 
# $Id: Makefile.in,v 1.14 2000-02-18 03:45:41 dfs Exp $

VERSION= 03.00.21
SHELL= /bin/sh

srcdir=@srcdir@
prefix=@prefix@
exec_prefix=@exec_prefix@
mandir=@mandir@
bindir=@bindir@
datadir=@datadir@
VPATH=$(srcdir)

INSTALL=@INSTALL@
INSTALL_PROGRAM=@INSTALL_PROGRAM@
INSTALL_DATA=@INSTALL_DATA@

PROGS=		remind rem2ps
SCRIPTS=	$(srcdir)/../scripts/kall $(srcdir)/../scripts/rem \
		$(srcdir)/../scripts/tkremind $(srcdir)/../scripts/cm2rem.tcl

MANS=		$(srcdir)/../man/kall.1 $(srcdir)/../man/rem.1 \
		$(srcdir)/../man/rem2ps.1 $(srcdir)/../man/remind.1 \
		$(srcdir)/../man/tkremind.1 $(srcdir)/../man/cm2rem.1

.SUFFIXES:
.SUFFIXES: .c .o

REMINDSRCS=	calendar.c dynbuf.c dorem.c dosubst.c expr.c files.c funcs.c \
		globals.c hbcal.c init.c main.c moon.c omit.c queue.c sort.c \
		token.c trigger.c userfns.c utils.c var.c

REMINDOBJS= $(REMINDSRCS:.c=.o)

all: remind rem2ps

test: remind
	sh ../tests/test-rem

.c.o:
	@CC@ -c @CFLAGS@ @DEFS@ $(CEXTRA) $(LANGDEF) -DUNIX -I. -I$(srcdir) $<

rem2ps: rem2ps.o dynbuf.o
	@CC@ @LDFLAGS@ -o rem2ps rem2ps.o dynbuf.o

remind: $(REMINDOBJS)
	@CC@ @LDFLAGS@ -o remind $(REMINDOBJS) @LIBS@

install: all
	for prog in $(PROGS) $(SCRIPTS) ; do \
		$(INSTALL_PROGRAM) $$prog $(bindir) ; \
	done
	-strip $(bindir)/remind
	-strip $(bindir)/rem2ps
	for man in $(MANS) ; do  \
		$(INSTALL_DATA) $$man $(mandir)/man1 ; \
	done

clean:
	rm -f *.o *~ core *.bak $(PROGS)

clobber:
	rm -f *.o *~ remind rem2ps test.out core *.bak

depend:
	gccmakedep @DEFS@ -DUNIX $(REMINDSRCS) rem2ps.c

# The next targets are not very useful to you.  I use them to build
# distributions, etc.

# Build a tar file based on all files checked into CVS.
tgz:
	ln -s .. remind-$(VERSION)
	peekentry `find remind-$(VERSION) -depth -follow -name 'Entries' -print` | xargs tar cvf remind-$(VERSION).tar
	gzip -v -9 remind-$(VERSION).tar
	mv remind-$(VERSION).tar.gz
	rm -f remind-$(VERSION)

beta-tgz:
	ln -s .. remind-$(VERSION)-BETA
	peekentry `find remind-$(VERSION)-BETA -depth -follow -name 'Entries' -print` | xargs tar cvf remind-$(VERSION)-BETA.tar
	gzip -v -9 remind-$(VERSION)-BETA.tar
	rm -f remind-$(VERSION)-BETA
#---------------- Stuff after this added by "make depend" -----------------

